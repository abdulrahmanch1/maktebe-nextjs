# دار القرَاء (نسخة Next.js)

دار القرَاء هي مكتبة عربية تم إعادة بنائها باستخدام Next.js للواجهة الأمامية، وتستخدم Supabase للمصادقة وقاعدة البيانات (للكتب والتعليقات ورسائل الاتصال وميزات المستخدم). الواجهة الخلفية الأصلية المبنية بـ Node.js + Express + MongoDB قد تخدم أدوارًا تكميلية أو تاريخية.

## ️ المتطلبات
- Node.js
- npm
- Supabase Project (for Authentication and Database)

---

## التشغيل

لتشغيل المشروع بالكامل، يجب تشغيل كل من الواجهة الخلفية والواجهة الأمامية.

### ✅ الواجهة الخلفية (Backend) (الواجهة الخلفية الأصلية)

الواجهة الخلفية الأصلية موجودة في مجلد `maktebe` الأصلي. هذه الواجهة الخلفية قد تخدم أغراضًا تاريخية أو ميزات محددة لم يتم ترحيلها بالكامل إلى Supabase. **ملاحظة: مشروع `maktebe-nextjs` الحالي يعتمد بشكل أساسي على Supabase لجميع وظائفه الرئيسية (المصادقة، الكتب، التعليقات، رسائل الاتصال). تشغيل الواجهة الخلفية الأصلية ليس ضروريًا للوظائف الأساسية لهذا المشروع.**

```bash
# انتقل إلى مجلد المشروع الأصلي
cd /home/abdulrahman/maktebe/backend

# تثبيت الاعتماديات
npm install

# تشغيل الخادم
npm run dev
```

تأكد من وجود ملف `.env` في مجلد `maktebe/backend` يحتوي على المتغيرات التالية (إذا كانت الواجهة الخلفية لا تزال قيد الاستخدام):
```
JWT_SECRET=your_jwt_secret_key
MONGO_URI=mongodb://localhost:27017/maktebe
```

---

### ✅ الواجهة الأمامية (Frontend - Next.js)

الواجهة الأمامية موجودة في هذا المجلد (`maktebe-nextjs`). لتشغيلها:

```bash
# (يفترض أنك في مجلد maktebe-nextjs)

# تثبيت الاعتماديات (إذا لم تقم بذلك من قبل)
npm install

# تشغيل خادم التطوير
npm run dev
```

تأكد من وجود ملف `.env.local` في جذر المشروع (`maktebe-nextjs`) يحتوي على المتغيرات التالية:

```
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
NEXT_PUBLIC_API_URL=http://localhost:3000/api # إذا كنت تستخدم مسارات Next.js API كـ BFF
```

بعد تشغيل كلا الجزأين (إذا كانت الواجهة الخلفية الأصلية لا تزال قيد الاستخدام)، يمكنك فتح [http://localhost:3000](http://localhost:3000) في متصفحك لرؤية التطبيق.

---

## ✨ الميزات

* واجهة عربية
* مصادقة المستخدم عبر Supabase (تسجيل، تسجيل دخول، تحقق من البريد الإلكتروني)
* عرض وإضافة كتب للمفضلة (مدعومة بـ Supabase)
* CRUD للكتب (مدعومة بـ Supabase)
* صفحات ديناميكية مع توليد البيانات من الخادم (Server-Side Rendering) بفضل Next.js
* إدارة قائمة القراءة
* نظام التعليقات (مدعوم بـ Supabase)
* نموذج الاتصال

---

## نشر على Vercel

عند نشر المشروع على Vercel، ستحتاج فقط إلى نشر مشروع `maktebe-nextjs`. يجب عليك تعيين متغيرات البيئة التالية في إعدادات المشروع على Vercel:

- `NEXT_PUBLIC_SUPABASE_URL`: رابط مشروع Supabase الخاص بك.
- `NEXT_PUBLIC_SUPABASE_ANON_KEY`: مفتاح Supabase Anon Key الخاص بك.
- `NEXT_PUBLIC_API_URL`: رابط الواجهة الأمامية (Frontend) بعد نشرها (عادةً رابط Vercel الخاص بالمشروع نفسه إذا كنت تستخدم مسارات Next.js API كـ BFF).