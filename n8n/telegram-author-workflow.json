{
    "name": "Telegram Author (Parallel Search) to Supabase",
    "nodes": [
        {
            "parameters": {
                "updates": [
                    "message"
                ],
                "additionalFields": {}
            },
            "id": "telegram-trigger",
            "name": "Telegram Trigger",
            "type": "n8n-nodes-base.telegramTrigger",
            "typeVersion": 1.1,
            "position": [
                220,
                300
            ],
            "webhookId": "telegram-webhook",
            "credentials": {
                "telegramApi": {
                    "id": "YOUR_TELEGRAM_CREDENTIAL_ID",
                    "name": "Telegram account"
                }
            }
        },
        {
            "parameters": {
                "q": "={{ $json.message.text }}",
                "searchType": "image",
                "num": 1
            },
            "id": "google-image-search",
            "name": "Google Image Search",
            "type": "n8n-nodes-base.googleCustomSearch",
            "typeVersion": 1,
            "position": [
                460,
                180
            ],
            "credentials": {
                "googleCustomSearchApi": {
                    "id": "YOUR_GOOGLE_SEARCH_CREDENTIAL_ID",
                    "name": "Google Custom Search account"
                }
            }
        },
        {
            "parameters": {
                "url": "={{ $json.link }}",
                "responseFormat": "file",
                "options": {}
            },
            "id": "download-image",
            "name": "Download Image",
            "type": "n8n-nodes-base.httpRequest",
            "typeVersion": 4.1,
            "position": [
                660,
                180
            ]
        },
        {
            "parameters": {
                "operation": "upload",
                "bucketName": "author-images",
                "fileName": "={{ $node[\"Telegram Trigger\"].json.message.text.replace(/\\s+/g, '_') }}_{{ $now.format('YYYYMMDDHHmmss') }}.jpg",
                "options": {
                    "public": true
                }
            },
            "id": "supabase-upload",
            "name": "Upload to Supabase",
            "type": "n8n-nodes-base.supabase",
            "typeVersion": 1,
            "position": [
                860,
                180
            ],
            "credentials": {
                "supabaseApi": {
                    "id": "YOUR_SUPABASE_CREDENTIAL_ID",
                    "name": "Supabase account"
                }
            }
        },
        {
            "parameters": {
                "promptType": "define",
                "text": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
                "options": {
                    "systemMessage": "Ø£Ù†Øª Ù…Ø¤Ø±Ø® Ø¥Ø³Ù„Ø§Ù…ÙŠ Ø®Ø¨ÙŠØ±ØŒ ÙˆÙƒØ§ØªØ¨ Ø³ÙŠØ±ØŒ ÙˆÙ…ØªØ®ØµØµ ÙÙŠ ØªØ­Ø³ÙŠÙ† Ù…Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø¨Ø­Ø« (SEO). Ù…Ù‡Ù…ØªÙƒ Ù‡ÙŠ Ø§Ù„Ø¨Ø­Ø« ÙˆØªØ¬Ù…ÙŠØ¹ Ø³ÙŠØ±Ø© Ø°Ø§ØªÙŠØ© Ø´Ø§Ù…Ù„Ø© ÙˆÙ…Ù†Ø¸Ù…Ø© Ù„Ù„ØºØ§ÙŠØ© Ù„Ù„ÙƒØ§ØªØ¨/Ø§Ù„Ø¹Ø§Ù„Ù… Ø§Ù„Ø°ÙŠ ÙŠØ²ÙˆØ¯Ùƒ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ø³Ù…Ù‡.\n\n**Ø§Ù„Ù‡Ø¯Ù:**\nØ¥Ù†Ø´Ø§Ø¡ Ø³ÙŠØ±Ø© Ø°Ø§ØªÙŠØ© ØªÙƒÙˆÙ† **Ù…Ø­Ø³Ù†Ø© Ø¨Ù†Ø³Ø¨Ø© 100% Ù„Ù…Ø­Ø±ÙƒØ§Øª Ø¨Ø­Ø« Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ (SearchGPT, Perplexity)** Ùˆ **Google**.\n\n**Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©:**\n1.  **Ø§Ù„Ù„ØºØ©:** Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (ÙØµØ­Ù‰ Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø¬ÙˆØ¯Ø©).\n2.  **Ø§Ù„Ø¯Ù‚Ø©:** Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© (Google Search, Wikipedia) Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„ Ù…Ø¹Ù„ÙˆÙ…Ø©. Ø§Ø³ØªØ´Ù‡Ø¯ Ø¨Ø§Ù„ÙƒØªØ¨ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø¥Ù† Ø£Ù…ÙƒÙ† ÙÙŠ Ø§Ù„Ù†Øµ.\n3.  **Ø§Ù„Ù‡ÙŠÙƒÙ„ÙŠØ©:** ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ù…Ø®Ø±Ø¬ ÙƒØ§Ø¦Ù† JSON. Ø­Ù‚Ù„ 'bio' ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù…Ù†Ø³Ù‚Ø§Ù‹ Ø¨ØµÙŠØºØ© **Markdown** Ù…Ø¹ Ø¹Ù†Ø§ÙˆÙŠÙ† ÙˆØ§Ø¶Ø­Ø©.\n\n**Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© SEO & RAG:**\n-   **Ø§Ù„Ø«Ø±Ø§Ø¡ Ø§Ù„Ø¯Ù„Ø§Ù„ÙŠ:** Ø§Ø³ØªØ®Ø¯Ù… Ù…ØµØ·Ù„Ø­Ø§Øª Ø¯Ù‚ÙŠÙ‚Ø© (Ù…Ø«Ù„Ø§Ù‹: Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† 'Ø¯Ø±Ø³ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†'ØŒ Ù‚Ù„ 'Ø¨Ø±Ø¹ ÙÙŠ Ø§Ù„ÙÙ‚Ù‡ Ø§Ù„Ø´Ø§ÙØ¹ÙŠ'). Ù‡Ø°Ø§ ÙŠØ³Ø§Ø¹Ø¯ Ù…Ø®Ø§Ø²Ù† Ø§Ù„Ù…ØªØ¬Ù‡Ø§Øª (Vector Stores) Ø¹Ù„Ù‰ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø³ÙŠØ§Ù‚ Ø§Ù„ØµØ­ÙŠØ­.\n-   **Ø±Ø¨Ø· Ø§Ù„ÙƒÙŠØ§Ù†Ø§Øª:** Ø§Ø°ÙƒØ± Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø´ÙŠÙˆØ®ØŒ Ø§Ù„ØªÙ„Ø§Ù…ÙŠØ°ØŒ ÙˆØ§Ù„Ø£Ù…Ø§ÙƒÙ† Ø¨ÙˆØ¶ÙˆØ­. Ù‡Ø°Ù‡ ØªØ¹ØªØ¨Ø± 'ÙƒÙŠØ§Ù†Ø§Øª' Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù…Ø¹Ø±ÙØ© (Knowledge Graphs).\n-   **Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ©:** Ø§Ø¯Ù…Ø¬ ÙƒÙ„Ù…Ø§Øª Ù…ÙØªØ§Ø­ÙŠØ© Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ù‚ÙŠÙ…Ø© Ø¨Ø´ÙƒÙ„ Ø·Ø¨ÙŠØ¹ÙŠ (Ù…Ø«Ù„Ø§Ù‹: 'Ø³ÙŠØ±Ø© [Ø§Ù„Ø§Ø³Ù…]'ØŒ 'ÙƒØªØ¨ [Ø§Ù„Ø§Ø³Ù…]'ØŒ 'ÙØªØ§ÙˆÙ‰ [Ø§Ù„Ø§Ø³Ù…]').\n\n**Ù…Ø®Ø·Ø· Ù…Ø®Ø±Ø¬Ø§Øª JSON:**\nÙŠØ¬Ø¨ Ø£Ù† ØªØ¹ÙŠØ¯ ÙƒØ§Ø¦Ù† JSON ØµØ§Ù„Ø­ ÙŠØ·Ø§Ø¨Ù‚ Ù‡Ø°Ø§ Ø§Ù„Ù‡ÙŠÙƒÙ„ ØªÙ…Ø§Ù…Ø§Ù‹:\n\n```json\n{\n  \"name\": \"Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ (Ù…Ø¹ Ø§Ù„Ø£Ù„Ù‚Ø§Ø¨ Ù…Ø«Ù„ Ø§Ù„Ø¥Ù…Ø§Ù…/Ø§Ù„Ø´ÙŠØ®)\",\n  \"role\": \"ÙˆØ§Ø­Ø¯ Ù…Ù†: scholar, narrator, sheikh, author, other\",\n  \"bio\": \"(Ù†Øµ Markdown) Ø§Ø¨Ø¯Ø£ Ø¨ÙÙ‚Ø±Ø© Ù…Ù„Ø®Øµ Ù‚ÙˆÙŠØ© (Ù…Ù† Ù‡ÙˆØŒ Ù…ØªÙ‰ØŒ Ù„Ù…Ø§Ø°Ø§ Ù‡Ùˆ Ù…Ø´Ù‡ÙˆØ±). Ø«Ù… Ø§Ø³ØªØ®Ø¯Ù… Ø¹Ù†Ø§ÙˆÙŠÙ† ## Ù„Ù€: Ø§Ù„Ù†Ø´Ø£Ø©ØŒ Ø§Ù„ØªØ¹Ù„ÙŠÙ… ÙˆØ§Ù„Ø´ÙŠÙˆØ®ØŒ Ø£Ø¨Ø±Ø² Ø§Ù„Ù…Ø¤Ù„ÙØ§ØªØŒ Ø§Ù„Ø¥Ø±Ø«. Ø§Ø³ØªØ®Ø¯Ù… <b>bold</b> Ù„Ù„Ù…ØµØ·Ù„Ø­Ø§Øª Ø§Ù„Ù…Ù‡Ù…Ø©.\",\n  \"social_life\": \"ØµÙ Ø£Ø®Ù„Ø§Ù‚Ù‡ØŒ Ù…ÙƒØ§Ù†ØªÙ‡ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©ØŒ ÙˆØ·Ø±Ø§Ø¦Ù Ø¹Ù†Ù‡.\",\n  \"achievements\": \"Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø£Ù‡Ù… Ø§Ù„ÙƒØªØ¨ ÙˆØ§Ù„Ù…Ø³Ø§Ù‡Ù…Ø§Øª. Ø§Ø³ØªØ®Ø¯Ù… Ù†Ù‚Ø§Ø· ÙÙŠ Markdown.\",\n  \"birth_date\": \"Ù‡Ø¬Ø±ÙŠ / Ù…ÙŠÙ„Ø§Ø¯ÙŠ (Ù…Ø«Ø§Ù„: 1320 Ù‡Ù€ / 1902 Ù…)\",\n  \"death_date\": \"Ù‡Ø¬Ø±ÙŠ / Ù…ÙŠÙ„Ø§Ø¯ÙŠ\",\n  \"birth_place\": \"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©ØŒ Ø§Ù„Ø¯ÙˆÙ„Ø© (Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø­Ø¯ÙŠØ«Ø© ÙˆØ§Ù„ØªØ§Ø±ÙŠØ®ÙŠØ©)\",\n  \"residence_place\": \"Ø£Ù‡Ù… Ø§Ù„Ù…Ø¯Ù† Ø§Ù„ØªÙŠ Ø¹Ø§Ø´ ÙÙŠÙ‡Ø§\",\n  \"keywords\": [\"Ù…ØµÙÙˆÙØ©\", \"Ù…Ù†\", \"15\", \"ÙƒÙ„Ù…Ø©\", \"Ù…ÙØªØ§Ø­ÙŠØ©\", \"SEO\", \"ØªØªØ¶Ù…Ù† ÙƒÙ„Ù…Ø§Øª Ø·ÙˆÙŠÙ„Ø© Ø§Ù„Ø°ÙŠÙ„\"]\n}\n```\n\n**Ù‡Ø§Ù… Ø¬Ø¯Ø§Ù‹:**\n-   Ù„Ø§ ØªØ®ØªÙ„Ù‚ ØªÙˆØ§Ø±ÙŠØ®. Ø¥Ø°Ø§ ÙƒØ§Ù†Øª ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙØ©ØŒ Ù‚Ù„ 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'.\n-   ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„Ù€ 'bio' Ø·ÙˆÙŠÙ„Ø© Ø¨Ù…Ø§ ÙŠÙƒÙÙŠ (~1000-1500 ÙƒÙ„Ù…Ø©) Ù„ØªØºØ·ÙŠØ© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¬ÙˆØ§Ù†Ø¨ Ø¨Ø¹Ù…Ù‚."
                }
            },
            "id": "ai-agent",
            "name": "AI Author Researcher",
            "type": "@n8n/n8n-nodes-langchain.agent",
            "typeVersion": 1.6,
            "position": [
                660,
                450
            ]
        },
        {
            "parameters": {
                "model": "gpt-4o",
                "options": {
                    "temperature": 0.7
                }
            },
            "id": "openai-model",
            "name": "OpenAI Chat Model",
            "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
            "typeVersion": 1,
            "position": [
                660,
                650
            ],
            "credentials": {
                "openAiApi": {
                    "id": "YOUR_OPENAI_CREDENTIAL_ID",
                    "name": "OpenAI account"
                }
            }
        },
        {
            "parameters": {},
            "id": "google-search-tool",
            "name": "Google Custom Search Tool",
            "type": "@n8n/n8n-nodes-langchain.toolGoogleCustomSearch",
            "typeVersion": 1,
            "position": [
                800,
                650
            ],
            "credentials": {
                "googleCustomSearchApi": {
                    "id": "YOUR_GOOGLE_SEARCH_CREDENTIAL_ID",
                    "name": "Google Custom Search account"
                }
            }
        },
        {
            "parameters": {},
            "id": "wikipedia",
            "name": "Wikipedia",
            "type": "@n8n/n8n-nodes-langchain.toolWikipedia",
            "typeVersion": 1,
            "position": [
                940,
                650
            ]
        },
        {
            "parameters": {
                "jsonSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": { \"type\": \"string\", \"description\": \"Full name of the author\" },\n    \"role\": { \"type\": \"string\", \"enum\": [\"scholar\", \"narrator\", \"sheikh\", \"author\", \"other\"], \"description\": \"Primary role\" },\n    \"bio\": { \"type\": \"string\", \"description\": \"Detailed biography (~1500 words)\" },\n    \"social_life\": { \"type\": \"string\", \"description\": \"Social standing and character\" },\n    \"achievements\": { \"type\": \"string\", \"description\": \"Major works and contributions\" },\n    \"birth_date\": { \"type\": \"string\", \"description\": \"Birth date (Hijri/Gregorian)\" },\n    \"death_date\": { \"type\": \"string\", \"description\": \"Death date (Hijri/Gregorian)\" },\n    \"birth_place\": { \"type\": \"string\", \"description\": \"Place of birth\" },\n    \"residence_place\": { \"type\": \"string\", \"description\": \"Place of residence/death\" },\n    \"keywords\": { \"type\": \"array\", \"items\": { \"type\": \"string\" }, \"description\": \"SEO keywords\" }\n  },\n  \"required\": [\"name\", \"role\", \"bio\", \"birth_date\", \"death_date\"]\n}"
            },
            "id": "output-parser",
            "name": "Structured Output Parser",
            "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
            "typeVersion": 1,
            "position": [
                520,
                650
            ]
        },
        {
            "parameters": {
                "mode": "combine",
                "combinationMode": "mergeByPosition",
                "options": {}
            },
            "id": "merge-data",
            "name": "Merge Image & Info",
            "type": "n8n-nodes-base.merge",
            "typeVersion": 3,
            "position": [
                1100,
                300
            ]
        },
        {
            "parameters": {
                "table": {
                    "__rl": true,
                    "value": "authors",
                    "mode": "list",
                    "cachedResultName": "authors"
                },
                "columns": {
                    "mappingMode": "defineBelow",
                    "value": {
                        "name": "={{ $json.name }}",
                        "bio": "={{ $json.bio }}",
                        "social_life": "={{ $json.social_life }}",
                        "image_url": "={{ $json.publicUrl }}",
                        "role": "={{ $json.role }}",
                        "keywords": "={{ $json.keywords }}",
                        "achievements": "={{ $json.achievements }}",
                        "birth_date": "={{ $json.birth_date }}",
                        "death_date": "={{ $json.death_date }}",
                        "birth_place": "={{ $json.birth_place }}",
                        "residence_place": "={{ $json.residence_place }}"
                    },
                    "matchingColumns": [],
                    "schema": [
                        {
                            "id": "name",
                            "displayName": "name",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "readOnly": false,
                            "removed": false
                        }
                    ]
                },
                "options": {}
            },
            "id": "supabase-insert",
            "name": "Supabase Insert",
            "type": "n8n-nodes-base.supabase",
            "typeVersion": 1,
            "position": [
                1300,
                300
            ],
            "credentials": {
                "supabaseApi": {
                    "id": "YOUR_SUPABASE_CREDENTIAL_ID",
                    "name": "Supabase account"
                }
            }
        },
        {
            "parameters": {
                "chatId": "={{ $node[\"Telegram Trigger\"].json[\"message\"][\"chat\"][\"id\"] }}",
                "text": "=âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒØ§ØªØ¨ Ø¨Ù†Ø¬Ø§Ø­!\n\n**Ø§Ù„Ø§Ø³Ù…:** {{ $json.name }}\n**Ø§Ù„Ø¯ÙˆØ±:** {{ $json.role }}\n**ØªØ§Ø±ÙŠØ® Ø§Ù„ÙˆÙ„Ø§Ø¯Ø©:** {{ $json.birth_date }}\n**ØªØ§Ø±ÙŠØ® Ø§Ù„ÙˆÙØ§Ø©:** {{ $json.death_date }}\n\nğŸ–¼ **Ø§Ù„ØµÙˆØ±Ø©:** ØªÙ… Ø¬Ù„Ø¨ ØµÙˆØ±Ø© Ù…Ù† Ø¬ÙˆØ¬Ù„ ÙˆØ±ÙØ¹Ù‡Ø§.\n",
                "additionalFields": {}
            },
            "id": "telegram-reply",
            "name": "Telegram Reply",
            "type": "n8n-nodes-base.telegram",
            "typeVersion": 1.1,
            "position": [
                1520,
                300
            ],
            "credentials": {
                "telegramApi": {
                    "id": "YOUR_TELEGRAM_CREDENTIAL_ID",
                    "name": "Telegram account"
                }
            }
        }
    ],
    "connections": {
        "Telegram Trigger": {
            "main": [
                [
                    {
                        "node": "Google Image Search",
                        "type": "main",
                        "index": 0
                    },
                    {
                        "node": "AI Agent",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Google Image Search": {
            "main": [
                [
                    {
                        "node": "Download Image",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Download Image": {
            "main": [
                [
                    {
                        "node": "Upload to Supabase",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Upload to Supabase": {
            "main": [
                [
                    {
                        "node": "Merge Image & Info",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "OpenAI Chat Model": {
            "ai_language_model": [
                [
                    {
                        "node": "AI Agent",
                        "type": "ai_language_model",
                        "index": 0
                    }
                ]
            ]
        },
        "Google Custom Search Tool": {
            "ai_tool": [
                [
                    {
                        "node": "AI Agent",
                        "type": "ai_tool",
                        "index": 0
                    }
                ]
            ]
        },
        "Wikipedia": {
            "ai_tool": [
                [
                    {
                        "node": "AI Agent",
                        "type": "ai_tool",
                        "index": 0
                    }
                ]
            ]
        },
        "Structured Output Parser": {
            "ai_output_parser": [
                [
                    {
                        "node": "AI Agent",
                        "type": "ai_output_parser",
                        "index": 0
                    }
                ]
            ]
        },
        "AI Agent": {
            "main": [
                [
                    {
                        "node": "Merge Image & Info",
                        "type": "main",
                        "index": 1
                    }
                ]
            ]
        },
        "Merge Image & Info": {
            "main": [
                [
                    {
                        "node": "Supabase Insert",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Supabase Insert": {
            "main": [
                [
                    {
                        "node": "Telegram Reply",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        }
    }
}